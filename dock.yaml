---
 - hosts: ubuntu
   tasks:
   - name: stop c1 container
     command: docker stop c1
     ignore_errors: yes
   - name: remove c1 container
     command: docker rm c1
     ignore_errors: yes
   - name: remove demo image
     command: docker rmi demo
     ignore_errors: yes
   - name: Build Docker image from Dockerfile
     docker_image:
       build:
         path: /home/ubuntu/jdir/workspace/job2
       name: demo
       tag: latest
       source: build
   - name: create container out of the demo image
     command: docker run -d -p 8080:8080 --name c1 demo

